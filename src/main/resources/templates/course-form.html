<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <title>Course Form</title>
  <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
  <header>
    <div><strong>OCMS</strong></div>
    <nav>
      <a href="/courses">Courses</a>
      <a href="/enrollments">Enrollments</a>
      <a href="/admin/users" sec:authorize="hasRole('ADMIN')">Users</a>
      <form th:action="@{/logout}" method="post" style="display:inline">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button class="button secondary" type="submit">Logout</button>
      </form>
    </nav>
  </header>
  <div class="container">
    <div class="card">
      <h1>Course</h1>
      <form th:action="${course.id} != null ? @{'/courses/' + ${course.id}} : @{/courses}" method="post" th:object="${course}">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <div class="form-row">
          <label>Title</label>
          <input class="input" type="text" th:field="*{title}" required>
          <div class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
        </div>
        <div class="form-row">
          <label>Description</label>
          <textarea class="input" th:field="*{description}" rows="5" required></textarea>
          <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
        </div>
        <button class="button" type="submit">Save</button>
      </form>
    </div>
  </div>
</body>
</html>
